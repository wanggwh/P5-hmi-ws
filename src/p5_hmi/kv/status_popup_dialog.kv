<StatusPopupDialog>:
    size_hint: 0.8, 0.6
    md_bg_color: app.colors['bg_secondary']
    auto_dismiss: True
    radius: [dp(20), dp(20), dp(20), dp(20)]
    
    MDBoxLayout:
        orientation: "vertical"
        spacing: dp(0)
        padding: dp(0)
        md_bg_color: app.colors['bg_secondary']
        radius: [dp(20), dp(20), dp(20), dp(20)]
        
        MDCard:
            id: status_title_bar
            size_hint_y: None
            height: dp(20)
            md_bg_color: [1, 1, 1, 0]  # Start transparent, will animate to status color
            radius: [dp(20), dp(20), 0, 0]  # Rounded top corners to match dialog
            elevation: 0
        
        MDLabel:
            id: status_title
            text: "Status"
            font_style: "H6"
            theme_text_color: "Custom"
            text_color: app.colors['text_light']
            halign: "center"
            size_hint_y: None
            height: dp(40)
            padding: [dp(20), dp(0), dp(20), dp(0)]  # Only side padding
        
        MDLabel:
            id: status_subtitle
            text: "Robot Operation Update"
            font_style: "Body1"  # Larger text (was Caption)
            theme_text_color: "Custom"
            text_color: app.colors['text_muted']
            halign: "center"
            size_hint_y: None
            height: dp(25)  # Slightly larger height
            padding: [dp(20), dp(0), dp(20), dp(0)]  # No spacing between title and subtitle
        
        MDBoxLayout:
            orientation: "vertical"
            spacing: dp(5)
            padding: [dp(20), dp(5), dp(20), dp(20)]  # Small top padding for separation from subtitle
            
            MDSeparator:
                height: dp(1)

            MDLabel:
                id: robot_name
                text: " "
                font_style: "Body1"  # Larger font style
                theme_text_color: "Custom"
                text_color: app.colors['text_light']
                halign: "center"
                valign: "top"  # Changed from middle to top
                text_size: self.width, None
                size_hint_y: 0.6  # Reduced height to move text up
                padding: [dp(0), dp(10), dp(0), dp(0)]  # Add top padding
                line_height: 1.8  # Add more space between lines
            
            MDLabel:
                id: goal_name
                text: " "
                font_style: "Body1"  # Larger font style
                theme_text_color: "Custom"
                text_color: app.colors['text_light']
                halign: "center"
                valign: "top"  # Changed from middle to top
                text_size: self.width, None
                size_hint_y: 0.6  # Reduced height to move text up
                padding: [dp(0), dp(10), dp(0), dp(0)]  # Add top padding
                line_height: 1.8  # Add more space between lines

            
            MDLabel:
                id: status_message
                text: " "
                font_style: "Body1"  # Larger font style
                theme_text_color: "Custom"
                text_color: app.colors['text_light']
                halign: "center"
                valign: "top"  # Changed from middle to top
                text_size: self.width, None
                size_hint_y: 0.6  # Reduced height to move text up
                padding: [dp(0), dp(10), dp(0), dp(0)]  # Add top padding
                line_height: 1.8  # Add more space between lines
        
        MDSeparator:
            height: dp(1)
        
        MDBoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: dp(50)
            padding: [0, 0, 0, dp(30)]  # 30px from bottom
            MDRaisedButton:
                id: close
                text: "Close"
                size_hint_x: None
                width: dp(150)
                md_bg_color: app.colors['button_neutral']
                theme_text_color: "Custom"
                text_color: app.colors['text_light']
                pos_hint: {"center_x": 0.5}
                on_release: root.dismiss()
