<AdmittanceControl>
    MDFloatLayout:

        MDBoxLayout:
            orientation: "vertical"
            padding: "2dp"
            spacing: "10dp"
            size_hint: 0.9, None
            height: dp(120)
            pos_hint: {'center_x': 0.5, 'top': 1.08}

            # Horizontal layout for side-by-side buttons
            MDBoxLayout:
                orientation: "horizontal"
                spacing: "10dp"
                size_hint_y: None
                height: dp(80)

                # BOB Section
                MDBoxLayout:
                    orientation: "vertical"
                    spacing: "5dp"
                    size_hint_x: 0.5

                    MDLabel:
                        adaptive_height: True
                        text: "BOB - Admittance Control"
                        theme_text_color: "Custom"
                        text_color: app.colors['text_light']
                        halign: "center"

                    MDSegmentedButton:
                        spacing: "4dp"
                        size_hint_x: 1

                        MDSegmentedButtonItem:
                            text: "Enable"
                            active: False
                            theme_bg_color: "Custom" 
                            md_bg_color: app.colors['bg_secondary']
                            theme_text_color: "Custom"
                            text_color: app.colors['text_light']
                            on_active: root.on_admittance_bob_toggle(self, self.active)

                        MDSegmentedButtonItem:
                            text: "Disable"
                            active: True
                            theme_bg_color: "Custom"
                            md_bg_color: app.colors['bg_secondary']
                            theme_text_color: "Custom" 
                            text_color: app.colors['text_light']
                            on_active: root.on_admittance_bob_toggle(self, self.active)

                # ALICE Section
                MDBoxLayout:
                    orientation: "vertical"
                    spacing: "5dp"
                    size_hint_x: 0.5

                    MDLabel:
                        adaptive_height: True
                        text: "ALICE - Admittance Control"
                        theme_text_color: "Custom"
                        text_color: app.colors['text_light']
                        halign: "center"

                    MDSegmentedButton:
                        spacing: "4dp"
                        size_hint_x: 1

                        MDSegmentedButtonItem:
                            text: "Enable"
                            active: False
                            theme_bg_color: "Custom"
                            md_bg_color: app.colors['bg_secondary']
                            theme_text_color: "Custom"
                            text_color: app.colors['text_light']
                            on_active: root.on_admittance_alice_toggle(self, self.active)

                        MDSegmentedButtonItem:
                            text: "Disable"
                            active: True
                            theme_bg_color: "Custom"
                            md_bg_color: app.colors['bg_secondary']
                            theme_text_color: "Custom"
                            text_color: app.colors['text_light']
                            on_active: root.on_admittance_alice_toggle(self, self.active)

        # Separate slider section - placeret længere nede med mere luft
        MDBoxLayout:
            orientation: "vertical"
            spacing: dp(20)  # Større mellemrum mellem sliders
            size_hint: 0.9, None
            height: dp(250)  # Mere plads til sliders
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}  # Placeret længere nede
                
            # Mass/Inertia Matrix
            MDBoxLayout:
                orientation: "horizontal"
                spacing: dp(10)  # Øget spacing mellem elementer
                size_hint_y: None
                height: dp(50)  # Højere slider rækker for mere luft
                        
                MDLabel:
                    text: "Mass/Inertia Matrix:"
                    size_hint_x: None
                    width: dp(150)
                    theme_text_color: "Custom"
                    text_color: app.colors['text_light']
                    
                MDIconButton:
                    icon: "minus"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    theme_icon_color: "Custom"
                    theme_icon_size: "Custom"
                    icon_size: dp(20)
                    icon_color: app.colors['text_light']
                    on_press: root.start_decrement(0)
                    on_release: root.stop_increment_decrement()
                        
                NonInteractiveSlider:
                    id: M_slider
                    min: -2
                    max: 2
                    value: 0
                    step: 0.1
                    theme_thumb_color: "Custom"
                    theme_track_color: "Custom"
                    thumb_color_inactive: (0.3, 0.7, 1.0, 1)
                    thumb_color_active: (0.3, 0.7, 1.0, 1)
                    track_color_active: (0.3, 0.7, 1.0, 1)
                    track_color_inactive: app.colors['button_neutral']
                    on_value: root.on_joint_change(0, self.value)
                    
                MDIconButton:
                    icon: "plus"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    theme_icon_color: "Custom"
                    theme_icon_size: "Custom"
                    icon_size: dp(20)
                    icon_color: app.colors['text_light']
                    on_press: root.start_increment(0)
                    on_release: root.stop_increment_decrement()
                        
                MDLabel:
                    id: M_value
                    text: "0.0"
                    size_hint_x: None
                    width: dp(50)
                    theme_text_color: "Custom"
                    text_color: app.colors['text_muted']
            
            # Damping Matrix
            MDBoxLayout:
                orientation: "horizontal"
                spacing: dp(10)  # Øget spacing mellem elementer
                size_hint_y: None
                height: dp(50)  # Højere slider rækker for mere luft
                
                MDLabel:
                    text: "Damping Matrix:"
                    size_hint_x: None
                    width: dp(150)
                    theme_text_color: "Custom"
                    text_color: app.colors['text_light']
                    
                MDIconButton:
                    icon: "minus"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    theme_icon_color: "Custom"
                    theme_icon_size: "Custom"
                    icon_size: dp(20)
                    icon_color: app.colors['text_light']
                    on_press: root.start_decrement(1)
                    on_release: root.stop_increment_decrement()
                    
                NonInteractiveSlider:
                    id: D_slider
                    min: -2.0
                    max: 2.0
                    value: 0.0
                    step: 0.1
                    theme_thumb_color: "Custom"
                    theme_track_color: "Custom"
                    thumb_color_inactive: (0.3, 0.7, 1.0, 1)
                    thumb_color_active: (0.3, 0.7, 1.0, 1)
                    track_color_active: (0.3, 0.7, 1.0, 1)
                    track_color_inactive: app.colors['button_neutral']
                    on_value: root.on_joint_change(1, self.value)
                    
                MDIconButton:
                    icon: "plus"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    theme_icon_color: "Custom"
                    theme_icon_size: "Custom"
                    icon_size: dp(20)
                    icon_color: app.colors['text_light']
                    on_press: root.start_increment(1)
                    on_release: root.stop_increment_decrement()
                    
                MDLabel:
                    id: D_value
                    text: "0.0"
                    size_hint_x: None
                    width: dp(50)
                    theme_text_color: "Custom"
                    text_color: app.colors['text_muted']
            
            # Stiffness Matrix
            MDBoxLayout:
                orientation: "horizontal"
                spacing: dp(10)  # Øget spacing mellem elementer
                size_hint_y: None
                height: dp(50)  # Højere slider rækker for mere luft
                
                MDLabel:
                    text: "Stiffness Matrix:"
                    size_hint_x: None
                    width: dp(150)
                    theme_text_color: "Custom"
                    text_color: app.colors['text_light']
                    
                MDIconButton:
                    icon: "minus"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    theme_icon_color: "Custom"
                    theme_icon_size: "Custom"
                    icon_size: dp(20)
                    icon_color: app.colors['text_light']
                    on_press: root.start_decrement(2)
                    on_release: root.stop_increment_decrement()
                    
                NonInteractiveSlider:
                    id: k_slider
                    min: -2
                    max: 2
                    value: 0
                    step: 0.1
                    theme_thumb_color: "Custom"
                    theme_track_color: "Custom"
                    thumb_color_inactive: (0.3, 0.7, 1.0, 1)
                    thumb_color_active: (0.3, 0.7, 1.0, 1)
                    track_color_active: (0.3, 0.7, 1.0, 1)
                    track_color_inactive: app.colors['button_neutral']
                    on_value: root.on_joint_change(2, self.value)
                    
                MDIconButton:
                    icon: "plus"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    theme_icon_color: "Custom"
                    theme_icon_size: "Custom"
                    icon_size: dp(20)
                    icon_color: app.colors['text_light']
                    on_press: root.start_increment(2)
                    on_release: root.stop_increment_decrement()
                    
                MDLabel:
                    id: k_value
                    text: "0.0"
                    size_hint_x: None
                    width: dp(50)
                    theme_text_color: "Custom"
                    text_color: app.colors['text_muted']
            
            # Matrix display section
            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: dp(50)  # Øget højde for matrix label
                
                MDLabel:
                    id: matrix_printed
                    text: "Gulle og Jensen er begge seje"
                    pos_hint: {'center_x': 0.5}
                    size_hint: None, None
                    width: dp(50)
                    height: dp(30)
                    halign: "center"
                    theme_text_color: "Custom"
                    text_color: app.colors['text_muted']

